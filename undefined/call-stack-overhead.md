# Call stack overhead

자바에서 호출 스택(콜 스택)은 메소드 호출 및 반환을 추적하는데 사용된다. 호출 스택에는 각 메소드 호출 시 생성되는 프레임들이 쌓이며, 메소드가 반환되면 해당 프레임이 스택에서 제거된다. 이 스택에 쌓이는 과정에서 오버헤드 발생 케이스는 아래와 같다.



* 메소드 호출 오버헤드
  * 새로운 메소드 호출시 호출 스택에 새로운 프레임이 추가된다. 이 과정에서 메모리 공간이 할당되고 초기화되는데, 이 작업이 반복되면서 오버헤드가 발생할 수 있다.
* 재귀 호출
  * 재귀 알고리즘을 사용하면 같은 메소드를 반복해서 호출하는데, 이로 인해 스택에 많은 수의 프레임이 쌓이면서 오버헤드가 발생할 수 있다. 이는 스택의 한계를 초과하거나 메모리 부족 상황을 초래할 수 있다.

자바에서는 호출 스택의 크기를 설정할 수 있지만, 스택 크기가 너무 작으면 복잡한 애플리케이션에서는 스택 오버플로우가 발생할 수 있으며, 너무 크면 메모리 소모가 커질 수 있다.



**Java 8 이후:** Java 8에서부터는 `-Xss` 플래그를 사용하여 호출 스택 크기를 설정할 수 있습니다. 기본적으로는 이전 버전과 비슷한 크기로 설정되어 있지만, `-Xss` 옵션을 사용하여 변경할 수 있습니다.





## JVM 호출 스택

* 각 스레드마다 생성한다.
* 해당 스레드가 호출한 메서드에 대한 정보를 저장한다.
* 스택 프레임은 메서드의 반환 주소를 포함하여 현재 실행 중인 메서드의 상태를 저장한다.
* 메서드가 반환되면 해당 스택 프레임을 제거한다.
* 메서드 호출 시 지역 변수, 매개 변수, 메서드 반환 값 등을 저장한다.



### 스택 프레임(Stack frame)

메모리 스택 영역은 함수의 호출과 관계되는 지역 변수와 매개변수가 저장되는 영역입니다.

스택 영역은 함수의 호출과 함께 할당되며, 함수의 호출이 완료되면 소멸합니다.



함수가 호출되면 스택에는 함수의 매개변수, 호출이 끝난 뒤 돌아가 반환 주소값, 함수에서 선언된 지역 변수 등이 저장됩니다. 이렇게 스택 영역에 차례대로 저장되는 함수의 호출 정보를 스택 프레임이라고 합니다.\
이러한 스택 프레임 덕분에 함수의 호출이 모두 끝난 뒤에, 해당 함수가 호출되기 이전 상태로 되돌아갈 수 있습니다.

<figure><img src="../.gitbook/assets/image (18).png" alt=""><figcaption></figcaption></figure>





